<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Background Remover</title>
    <link rel="stylesheet" href="./style.css" />
  </head>
  <body>
    <main class="container">
      <h1>Background Remover</h1>
      <p class="sub">Upload an image → remove background → download PNG</p>

      <section class="card">
        <label class="file">
          <input id="fileInput" type="file" accept="image/*" />
          <span>Select image</span>
        </label>

        <div class="row">
          <button id="downloadBtn" disabled hidden>Download PNG</button>
        </div>

        <div class="grid">
          <div>
            <h3>Original</h3>
            <div class="preview">
              <img id="beforeImg" alt="" />
            </div>
          </div>

          <div>
            <h3>Result (PNG)</h3>
            <div class="preview checker">
              <p id="status" class="status result-status" hidden></p>
              <img id="afterImg" alt="" />
            </div>
          </div>
        </div>
      </section>

      <footer class="footer">
        <small>
          Background removal powered by open-source software (AGPL-3.0).
        </small>
      </footer>
    </main>

    <script type="module">
      import("./main.js?v=20260120-4").catch((e) => {
        const statusEl = document.getElementById("status");
        if (statusEl) {
          statusEl.textContent = "Ошибка загрузки скрипта.";
          statusEl.classList.add("error");
        }
        console.error(e);
      });
    </script>

    <!-- Yandex.Metrika counter -->
    <script type="text/javascript">
      (function(m,e,t,r,i,k,a){
          m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
          m[i].l=1*new Date();
          for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
          k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)
      })(window, document,'script','https://mc.yandex.ru/metrika/tag.js?id=106410230', 'ym');

      ym(106410230, 'init', {ssr:true, webvisor:true, clickmap:true, ecommerce:"dataLayer", referrer: document.referrer, url: location.href, accurateTrackBounce:true, trackLinks:true});
    </script>
    <noscript><div><img src="https://mc.yandex.ru/watch/106410230" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
    <!-- /Yandex.Metrika counter -->
  </body>
</html>
